# Netlify Configuration for LogiFin Frontend

[build]
  # Frontend-only build command
  command = "npm run build:frontend"

  # Output directory (Vite builds to dist/)
  publish = "dist"

  # Netlify Functions directory
  functions = "netlify/functions"

  # Environment variables for build
  [build.environment]
    NODE_VERSION = "20"
    VITE_API_URL = "/api"

# API Proxy - Forward /api/* requests to Netlify Function
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/api-proxy/api/:splat"
  status = 200

# SPA redirect rules - send all routes to index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Production environment specific settings
[context.production]
  [context.production.environment]
    VITE_API_URL = "/api"

# Deploy preview environment (for pull requests)
[context.deploy-preview]
  [context.deploy-preview.environment]
    VITE_API_URL = "/api"

# Branch deploy environment
[context.branch-deploy]
  [context.branch-deploy.environment]
    VITE_API_URL = "/api"
